<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8">
    <title>ê¸€ì“°ê¸° ğŸŒ¸</title>
    <link rel="stylesheet" href="style.css"/>
  </head>
  <body>
    <div class="container">
      <div class="box">
        <h1 class="post-title">ê¸€ì“°ê¸° ğŸŒ¸</h1>

        <form id="write-form">
          <label>ì œëª©</label>
          <input type="text" id="title" required />

          <label>ë‚´ìš©</label>
          <textarea id="content" required></textarea>

          <button type="submit">ì‘ì„±í•˜ê¸°</button>
        </form>

        <a class="btn-back" href="index.html">â† ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
      </div>
    </div>

    <script>
      const STORAGE_KEY = 'myTablePosts';

      // localStorageì—ì„œ ê¸€ ë¶ˆëŸ¬ì˜¤ê¸°
      function loadPosts() {
        try {
          return JSON.parse(localStorage.getItem(STORAGE_KEY) || '[]');
        } catch (e) {
          console.error(e);
          return [];
        }
      }

      // localStorage ì €ì¥
      function savePosts(posts) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(posts));
      }

      const form = document.getElementById('write-form');

      form.addEventListener('submit', (e) => {
        e.preventDefault();  // ê¸°ë³¸ ë™ì‘(ìƒˆë¡œê³ ì¹¨, ì„œë²„ì „ì†¡) ë§‰ê¸°

        const title = document.getElementById('title').value.trim();
        const content = document.getElementById('content').value.trim();

        if (!title || !content) {
          alert("ì œëª©ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.");
          return;
        }

        const posts = loadPosts();

        // ê³ ìœ  ID ìƒì„±
        const newId = posts.length > 0 ? Math.max(...posts.map(p => p.id)) + 1 : 1;

        // ê¸€ ê°ì²´ ìƒì„±
        const newPost = {
          id: newId,
          title,
          content,
          writer: "ìµëª…",
          createdAt: new Date().toISOString()
        };

        posts.push(newPost);
        savePosts(posts);

        alert("ì‘ì„± ì™„ë£Œ! ğŸŒ¸");
        location.href = "index.html";
      });
    </script>
  </body>
</html>
